!function(){"use strict";angular.module("DuoGourmet",["ui.mask","ui.utils.masks"]).run(function(){angular.element(document).ready(function(){})})}(),function(){"use strict";function e(e){return{beforeAuth:function(t,o,n){return e.callApi("/identifier",{cpf:t,redirectTo:o,recaptchaToken:n})},forgotPassword:function(t){return e.callApi("/forgot-password",{cpf:t})},checkingPassword:function(e,t,o){var n=t.split(" "),r=!0,a=new Date(o).toLocaleDateString(),i=a.replace(/\//g,"");if(n.forEach(t=>{if(e&&t.length>3&&e.toLowerCase().includes(t.toLowerCase()))return r=!1,!1}),!r)return!1;if(e.includes(a)||e.includes(i)||e.includes(a.split("/")[2]))return!1;if(!function(e){for(var t in e)if(+e[+t+1]==+e[t]+1&&+e[+t+2]==+e[t]+2)return!1;for(var o in e)if(String.fromCharCode(e.charCodeAt(o)+1)==e[+o+1]&&String.fromCharCode(e.charCodeAt(o)+2)==e[+o+2])return!1;return!0}(e))return!1;if(!/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.{8,})/.test(e)||!/[^a-zA-Z0-9]/.test(e))return!1;return!0},saveNewPassword:function(t,o,n){var r={userCpf:t,codeToCheck:o,newPassword:n};return e.callApi("/new-password",r)}}}angular.module("DuoGourmet").factory("AuthService",e),e.$inject=["Utilities"]}(),function(){"use strict";function e(e,t){return{checkCPF:function(o){var n=e.defer();return t.callApi("/check-cpf",o).then(function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise}}}angular.module("DuoGourmet").factory("CheckCpfService",e),e.$inject=["$q","Utilities"]}(),function(){"use strict";function e(e,t){return{subscribeB2b:function(o){var n=e.defer();return t.callApi("/b2b-subscribe",o).then(function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise}}}angular.module("DuoGourmet").factory("DuoB2bService",e),e.$inject=["$q","Utilities"]}(),function(){"use strict";function e(e,t){return{sendRecoveryEmail:function(e){return t.callApi("/forgot-password",{userCpf:e})},checkCodeToRecover:function(o,n){var r=e.defer();const a={task:"checkRecoveryCode",codeToCheck:n,cpf:o};return t.callApi("/check-code",a).then(function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise}}}angular.module("DuoGourmet").factory("ForgotPasswordService",e),e.$inject=["$q","Utilities"]}(),function(){"use strict";function e(e,t){return{login:function(o,n,r,a){var i=e.defer(),s={cpf:o,password:n,redirectTo:r,recaptchaToken:a};return t.callApi("/login",s).then(function(e){i.resolve(e)},function(e){i.reject(e)}),i.promise}}}angular.module("DuoGourmet").factory("LoginService",e),e.$inject=["$q","Utilities"]}(),function(){"use strict";function e(e,t){return{updatePartner:function(o){var n=e.defer();return t.callApi("/partner",o,6e4).then(function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise}}}angular.module("DuoGourmet").factory("PartnerService",e),e.$inject=["$q","Utilities"]}(),function(){"use strict";function e(e,t){return{subscribePartner:function(o){var n=e.defer();return t.callApi("/parcerias-subscribe",o).then(function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise}}}angular.module("DuoGourmet").factory("PartnersHomeService",e),e.$inject=["$q","Utilities"]}(),function(){"use strict";function e(e,t){return{finishSubscription:function(o){var n=e.defer();return t.callApi("/subscription",o,12e4).then(function(){n.resolve({subscribed:!0})},function(e){var t=e.message||"";n.reject({subscribed:!1,message:t})}),n.promise},createPaymentToken:function(o={number:null,verification_value:null,first_name:null,last_name:null,month:null,year:null}){var n=e.defer();return t.callApi("/payment-token",{cardInfo:o},12e4).then(function(e){n.resolve(e.data.paymentTokenId)},function(e){var t=e.message||"";n.reject({subscribed:!1,message:t})}),n.promise}}}angular.module("DuoGourmet").factory("PaymentService",e),e.$inject=["$q","Utilities"]}(),function(){"use strict";function e(e,t){return{signUp:function(o){var n=e.defer();return t.callApi("/signup",o).then(function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise}}}angular.module("DuoGourmet").factory("SignUpService",e),e.$inject=["$q","Utilities"]}(),function(){"use strict";function e(e,t){return{payFamilyPlan:function(o){var n=e.defer();return t.callApi("/family",o,12e4).then(function(e){n.resolve({paid:!0,redirectTo:e.redirectTo})},function(e){var t=e.message||"";n.reject({paid:!1,message:t})}),n.promise},sendInvitesByEmail:function(o,n,r){var a=e.defer();return t.callApi("/sendInvitesByEmail",{giftId:o,buyerName:n,buyerEmail:r},12e4).then(function(){a.resolve({sent:!0})},function(e){a.reject({sent:!1,message:e.message})}),a.promise}}}angular.module("DuoGourmet").factory("FamilyService",e),e.$inject=["$q","Utilities"]}(),function(){"use strict";function e(e,n){return{callApi:function(t,o,r){var a=n.defer();return e({method:"POST",url:t,timeout:r=r||3e4,headers:{"Content-Type":"application/json"},data:o}).then(function(e){a.resolve(e.data)},function(e){var t=e&&e.data?e.data:{};t.message=t.message||"",a.reject(t)}),a.promise},showLoadingMessage:function(e,t){$("body").loading({message:e,stoppable:t,zIndex:1051,onStart:function(e){e.overlay.slideDown(400)},onStop:function(e){e.overlay.slideUp(400)}})},hideLoadingMessage:function(){$("body").loading("stop")},isValidCpf:function(e){if(!e)return!1;var t=(e=jQuery.trim(e)).replace(/[.-]/gi,"");for(;t.length<11;)t="0"+t;for(var o=[],n=Number(0),r=11,a=0;a<11;a++)o[a]=t.charAt(a),a<9&&(n+=o[a]*--r);var i=null;(i=n%11)<2?o[9]=0:o[9]=11-i;n=0,r=11;for(var s=0;s<10;s++)n+=o[s]*r--;(i=n%11)<2?o[10]=0:o[10]=11-i;return t.charAt(9)==o[9]&&t.charAt(10)==o[10]&&!t.match(/^0+$|^1+$|^2+$|^3+$|^4+$|^5+$|^6+$|^7+$|^8+$|^9+$/)},onlyNumbers:function(e){return e.replace(/[^0-9]/g,"")},getUserLastNames:function(e){if(e){const t=e.split(" ");if(t.length>1){let e="";return t.splice(0,1),t.forEach(t=>{e+=r(t)+" "}),e.trim()}return""}return""},capitalizeFirstLetter:r,getUserFirstName:function(e){if(e){const t=e.split(" ");return r(t[0])}return""},redirectTo:t,isMobile:o};function r(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()}}function t(e){if(e.indexOf("http:")>=0||e.indexOf("https:")>=0){var t=e;t.includes(window.location.origin)?window.location.replace(t):window.location.replace(window.location.origin+"/minha-conta")}else window.location.replace(window.location.origin+e)}function o(){return!!(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i))}angular.module("DuoGourmet").factory("Utilities",e),e.$inject=["$http","$q"]}(),function(){"use strict";function e(e,t){return{payGift:function(o){var n=e.defer();return t.callApi("/gift",o,12e4).then(function(e){n.resolve({paid:!0,giftId:e.giftId})},function(e){var t=e.message||"";n.reject({paid:!1,message:t})}),n.promise},sendEmail:function(o,n,r,a){var i=e.defer();return t.callApi("/sendGiftByEmail",{giftId:o,buyerName:n,recipientEmail:r,recipientName:a},12e4).then(function(){i.resolve({sent:!0})},function(e){i.reject({sent:!1,message:e.message})}),i.promise}}}angular.module("DuoGourmet").factory("GiftService",e),e.$inject=["$q","Utilities"]}(),function(){"use strict";function e(e,t,o){return{sendVoucherInfo:function(o){var n=e.defer();return t.callApi("/voucher/pagamento",o,12e4).then(function(){n.resolve({subscribed:!0})},function(e){var t=e.message||"";n.reject({subscribed:!1,message:t})}),n.promise},signUp:function(o){var n=e.defer();return t.callApi("/signup",o).then(function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise},getAddressByCep:function(t){var n=e.defer();return t=t?t.replace("-",""):"",o({method:"GET",url:"https://viacep.com.br/ws/"+t+"/json/",headers:{"Content-Type":"application/json"},timeout:18e4}).then(function(e){n.resolve(e?e.data:null)},function(){n.reject()}),n.promise}}}angular.module("DuoGourmet").factory("VoucherService",e),e.$inject=["$q","Utilities","$http"]}(),function(){"use strict";function e(e,t){var o=this,n=0;o.birthday=null,angular.element(document).ready(function(){$("#birthday").mask("00/00/0000"),$(".form-checkcpf").on("submit",function(r){var a,i;if((r.preventDefault(),a=moment(o.birthday,"DD/MM/YYYY"),!((i=moment().diff(moment(a,"DD/MM/YYYY"),"years"))<=10||i>=100)||($("#birthday").notify("Data de nascimento inv√°lida!",{position:"bottom center",autoHideDelay:1e4}),0))&&(0!=grecaptcha.getResponse().length||($(".g-recaptcha").notify("Confirme que voc√™ n√£o √© um rob√¥ ü§ñ!",{position:"bottom center",autoHideDelay:1500}),0))){++n,e.showLoadingMessage("Aguarde...",!1);var s={fullName:o.fullname,cpf:o.cpf,birthday:moment(o.birthday,"DD/MM/YYYY").format("YYYY-MM-DD"),recaptchaToken:grecaptcha.getResponse()};t.checkCPF(s).then(function(t){t.data.result?e.redirectTo(o.redirectTo?o.redirectTo:t.redirectTo):($("#birthday").notify("Seus dados parecem incorretos, verifique-os e tente novamente!",{position:"bottom center",autoHideDelay:1e4}),3===n&&(swal("Oops...","N√∫mero de tentativas excedidas!","warning"),window.setTimeout(function(){window.location="sair"},5e3))),c()}).catch(function(e){swal("Oops...",e.message,"error"),c()})}function c(){$("body").loading("stop"),grecaptcha.reset()}})})}angular.module("DuoGourmet").controller("CheckCpfController",e),e.$inject=["Utilities","CheckCpfService"]}(),function(){"use strict";function e(e){this.subscriptionOnclick=function(t,o){t.preventDefault(),$.ajax({type:"POST",url:"/selected-family-plan",dataType:"JSON",timeout:12e4,data:{planId:o},success:function(t){e.redirectTo(t.redirectTo)},error:function(e){swal("Oops...",e.responseJSON.message,"error")}})},$(".btn-subscription").click(function(e){e.preventDefault(),$.ajax({type:"POST",url:"/selected-plan",dataType:"JSON",data:{plan:$(this).data("plan")},success:function(){window.location="/pagamento"},error:function(e){swal({title:"Oops...",text:e.responseJSON.message||"Tente novamente!",type:"error"}).then(function(){window.location.reload()})}})})}angular.module("DuoGourmet").controller("ChoosePlanController",e),e.$inject=["Utilities"]}(),function(){"use strict";function e(e,t,o){var n=this;function r(e){if(!e)return swal("Oops...","Atualize a p√°gina e tente novamente!","error"),void grecaptcha.reset();const r={companyName:n.companyName,companySite:n.companySite,personName:n.personName,personRole:n.personRole,city:n.city,phone:n.phone,email:n.email,recaptchaToken:e};t.showLoadingMessage("Aguarde...",!1),o.subscribeB2b(r).then(function(){t.hideLoadingMessage(),swal("","Sua solicita√ß√£o foi enviada com sucesso. Obrigado!","success"),n.companyName="",n.companySite="",n.personName="",n.personRole="",n.city="",n.phone="",n.email="",grecaptcha.reset()},function(e){t.hideLoadingMessage(),swal("Oops...",e.message,"error"),grecaptcha.reset()})}n.onSubmit=r,n.validate=function(){grecaptcha.execute()},e.onSubmit=r}angular.module("DuoGourmet").controller("DuoB2bController",e),e.$inject=["$window","Utilities","DuoB2bService"]}(),function(){"use strict";function e(e,t,o,n){var r=this;r.sendRecoveryEmail=function(){if(!r.cpf||!o.isValidCpf(r.cpf))return void swal("Oops...","Informe o CPF para recupera√ß√£o!","error");r.pageIndex=1,o.showLoadingMessage("Aguarde...",!1),e.sendRecoveryEmail(r.cpf).then(function(){var e;e=60,r.countDownResend=e,r.interval=t(function(){r.countDownResend-=1,0===r.countDownResend&&t.cancel(r.interval)},1e3),o.hideLoadingMessage()},function(e){o.hideLoadingMessage(),swal("Oops...",e.message,"error")})},r.checkCodeRecovery=function(t){if(t.preventDefault(),1===r.pageIndex){if(!r.codeToSend)return void swal("Oops...","Informe o c√≥digo de recupera√ß√£o!","error");o.showLoadingMessage("Aguarde...",!1),e.checkCodeToRecover(r.cpf,r.codeToSend).then(e=>{r.userName=e.data.userName,r.userBirthday=e.data.userBirthday,o.hideLoadingMessage(),r.pageIndex=2},e=>{o.hideLoadingMessage(),swal("Oops...",e.message,"error")})}},r.saveNewPassword=function(){if(!r.firstPassword)return void swal("Oops...","Informe uma nova senha para continuar","error");if(r.firstPassword!==r.secondPassword)return void swal("Oops...","As senhas devem ser iguais","error");n.checkingPassword(r.firstPassword,r.userName,r.userBirthday)?(o.showLoadingMessage("Aguarde...",!1),n.saveNewPassword(r.cpf,r.codeToSend,r.firstPassword).then(e=>{o.hideLoadingMessage(),swal("Sucesso",e.data.message,"success"),r.disabled=!0,window.setTimeout(function(){o.redirectTo("/entrar")},3e3)},e=>{o.hideLoadingMessage(),swal("Oops...",e.data.message,"error")})):swal("Oops...","Senha deve cumprir os requisitos","error")},r.countDownResend=null,r.interval=null,r.codeToSend=null,r.showRequirements=!1,r.userName=null,r.userBirthday=null,r.disabled=!1,r.pageIndex=0,r.passwordRequirements=[{textRequirement:"Senha deve ter no m√≠nimo 8 caracteres.",validatePassword:function(){return r.firstPassword&&r.firstPassword.length>=8}},{textRequirement:"Pelo menos uma letra mai√∫scula.",validatePassword:function(){return r.firstPassword&&/^(?=.*[A-Z])/.test(r.firstPassword)}},{textRequirement:"Pelo menos uma letra min√∫scula.",validatePassword:function(){return r.firstPassword&&/^(?=.*[a-z])/.test(r.firstPassword)}},{textRequirement:"Pelo menos um n√∫mero.",validatePassword:function(){return r.firstPassword&&/^(?=.*[0-9])/.test(r.firstPassword)}},{textRequirement:"Pelo menos um caractere especial. (Ex: ! ? . @ )",validatePassword:function(){return r.firstPassword&&/[^a-zA-Z0-9]/.test(r.firstPassword)}},{textRequirement:"N√£o possuir sequ√™ncia de letras e n√∫meros.",validatePassword:function(){return r.firstPassword&&function(e){for(var t in e)if(+e[+t+1]==+e[t]+1&&+e[+t+2]==+e[t]+2)return!1;for(var o in e)if(String.fromCharCode(e.charCodeAt(o)+1)==e[+o+1]&&String.fromCharCode(e.charCodeAt(o)+2)==e[+o+2])return!1;return!0}(r.firstPassword)}},{textRequirement:"N√£o conter informa√ß√µes pessoais.",validatePassword:function(){if(r.firstPassword){var e=!0,t=r.userName.split(" "),o=new Date(r.userBirthday).toLocaleDateString(),n=o.replace(/\//g,"");return t.forEach(t=>{r.firstPassword&&t.length>3&&r.firstPassword.toLowerCase().includes(t.toLowerCase())&&(e=!1)}),r.firstPassword&&e&&!r.firstPassword.includes(o)&&!r.firstPassword.includes(n)&&!r.firstPassword.includes(o.split("/")[2])}}}],r.requirementsContainer={display:"block"},r.pageConfigs=[{textAboveInput:"Informe seu CPF para continuar",textBelowInput:""},{textAboveInput:"Digite o c√≥digo enviado ao seu e-mail cadastrado para seguir com a recupera√ß√£o da sua senha:",textBelowInput:"Verifique se o e-mail n√£o est√° em sua caixa de spam, caso ainda n√£o tenha recebido."},{textAboveInput:"Digite aqui sua nova senha",textBelowInput:""}]}angular.module("DuoGourmet").controller("ForgotPasswordController",e),e.$inject=["ForgotPasswordService","$interval","Utilities","AuthService"]}(),function(){"use strict";function e(){angular.element(document).ready(function(){$(window).width()>991&&$(document).ready(function(){var e=document.getElementById("phoneMockup");const t=document.querySelector("#phone-sign"),o=document.querySelector("#phoneMockup"),n=document.querySelector("#phone-choose"),r=document.querySelector("#phone-show"),a=document.querySelector("#phone-enjoy");t.addEventListener("mouseenter",function(){$(e).attr("src",t.dataset.img)}),t.addEventListener("mouseleave",function(){$(e).attr("src",o.dataset.img)}),$("#phone-choose").hover(function(){$(e).attr("src",n.dataset.img)},function(){$(e).attr("src",o.dataset.img)}),$("#phone-show").hover(function(){$(e).attr("src",r.dataset.img)},function(){$(e).attr("src",o.dataset.img)}),$("#phone-enjoy").hover(function(){$(e).attr("src",a.dataset.img)},function(){$(e).attr("src",o.dataset.img)})}),$(".section-main-img").on("click",function(){window.location="/aplicativo"})})}angular.module("DuoGourmet").controller("HomeController",e),e.$inject=[]}(),function(){"use strict";function e(e,t,o){var n=this;function r(r){if(!o.isValidCpf(n.cpf))return $("#cpf").focus().notify("Informe o CPF corretamente!",{position:"bottom"}),void grecaptcha.reset();if(!r)return swal("Oops...","Atualize a p√°gina e tente novamente!","error"),void grecaptcha.reset();o.showLoadingMessage("Aguarde...",!1),n.isLogging=!0;var a=n.cpf.replace(/[.-]/gi,"");t.beforeAuth(a,n.redirectTo,r).then(function(t){o.hideLoadingMessage(),n.isLogging=!1,t.nextStep?e.location.href=t.nextStep:$("#cpf").focus().notify("Informe o CPF corretamente!",{position:"bottom"});grecaptcha.reset()},function(e){o.hideLoadingMessage(),swal("Oops...",e.message,"error"),n.isLogging=!1,grecaptcha.reset()})}n.cpf=null,n.isLogging=!1,n.redirectTo=null,n.onSubmit=r,e.onSubmit=r,n.validate=function(){grecaptcha.execute()},n.redirectLogin=function(){o.redirectTo("/entrar")}}angular.module("DuoGourmet").controller("IdentifierController",e),e.$inject=["$window","AuthService","Utilities"]}(),function(){"use strict";function e(e,t,o,n){let r=this;function a(e){if(!n.isValidCpf(r.cpf))return $("#cpf").focus().notify("Informe o CPF corretamente!",{position:"bottom"}),void grecaptcha.reset();n.showLoadingMessage("Aguarde...",!1),r.isLogging=!0,t.login(r.cpf.replace(/[.-]/gi,""),r.password,r.redirectTo,e).then(function(e){n.hideLoadingMessage(),r.isLogging=!1,grecaptcha.reset(),n.redirectTo(e.redirectTo)},function(e){n.hideLoadingMessage(),grecaptcha.reset(),swal("Oops...",e.message,"error"),r.isLogging=!1})}r.cpf=null,r.password=null,r.isLogging=!1,r.redirectTo=null,r.login=a,e.login=a,r.authWithFacebook=function(){e.location.href="/auth/facebook/redirect?redirectTo="+r.redirectTo},r.authWithApple=function(){e.location.href="/auth/apple/redirect?redirectTo="+r.redirectTo},r.validate=function(){grecaptcha.execute()}}angular.module("DuoGourmet").controller("LoginController",e),e.$inject=["$window","LoginService","AuthService","Utilities"]}(),function(){"use strict";function e(e){var t=this;t.subscriber={name:null,email:null},t.formSubmit=function(){$("body").loading({message:"Aguarde...",stoppable:!1,zIndex:1051,onStart:function(e){e.overlay.slideDown(400)},onStop:function(e){e.overlay.slideUp(400)}});var o={name:t.subscriber.name,email:t.subscriber.email,city:t.subscriber.city};$.ajax({type:"POST",url:"/newsletter",dataType:"JSON",data:o,timeout:12e4,success:function(){$("body").loading("stop"),swal("Obrigado!","Agora voc√™ receber√° as novidades sobre o Duo Gourmet!","success"),e(()=>{t.subscriber.name="",t.subscriber.email="",t.confirmation=!1},100)},error:function(e){$("body").loading("stop"),swal("Oops...",e.responseJSON.message,"error")}})},angular.element(document).ready(function(){$(".form-subscribe-newsletter").on("submit",function(e){e.preventDefault()}),$("footer #select-cities").on("change",function(){$("body").loading({message:"Alterando a cidade...",onStart:function(e){e.overlay.slideDown(400)},onStop:function(e){e.overlay.slideUp(400)}}),0===window.location.pathname.indexOf("/guia-impresso")?window.location.replace("/guia-impresso/"+$(this).val()):window.location.replace("/restaurantes/"+$(this).val())})})}angular.module("DuoGourmet").controller("MainController",e),e.$inject=["$timeout"]}(),function(){"use strict";function e(e,t,o){var n=this;n.validate=function(){grecaptcha.execute()},n.getWeekDayLabel=function(e){return 0===e?"Domingo":1===e?"Segunda":2===e?"Ter√ßa":3===e?"Quarta":4===e?"Quinta":5===e?"Sexta":"S√°bado"},n.showThanksMessage=!1,n.managerIdx=-1,n.ownerIdx=-1,n.totalErrors=0,n.manager={role:"manager"},n.owner={role:"owner"},e.onSubmit=function(e){if(!e)return swal("Oops...","Atualize a p√°gina e tente novamente!","error"),void grecaptcha.reset();n.owner.name&&(n.ownerIdx>=0?n.contacts[n.ownerIdx]=n.owner:n.contacts.push(n.owner));n.manager.name&&(n.managerIdx>=0?n.contacts[n.managerIdx]=n.manager:n.contacts.push(n.manager));if(n.restaurant.instagramUsername&&(r=n.restaurant.instagramUsername,/[^A-Za-z._0-9]/g.test(r)))return swal("Oops...","Informe o usu√°rio do instagram corretamente (sem o @)!","error"),window.document.getElementById("instagramUsername").focus(),void grecaptcha.reset();var r;var a=0;if(n.restaurant.weekCalendar.forEach(function(e){a+=e.lunch||e.dinner?1:0}),0==a)return swal("Oops...","Marque os dias em que o benef√≠cio estar√° dispon√≠vel!","error"),$("html, body").animate({scrollTop:$($("#weekCalendar")).offset().top-50},100),void grecaptcha.reset();function i(){$("body").loading("stop"),grecaptcha.reset()}n.restaurant.contacts=n.contacts,t.showLoadingMessage("Aguarde...",!1),o.updatePartner({restaurant:n.restaurant,recaptchaToken:e}).then(function(){n.showThanksMessage=!0,i()},function(){swal("Oops...","Atualize a p√°gina e tente novamente!","error"),n.totalErrors>=2?window.location.reload():n.totalErrors++,i()})},n.checkContacts=function(){n.contacts&&n.contacts.length>0?n.contacts.forEach(function(e,t){"owner"===e.role?(n.owner=e,n.ownerIdx=t):"manager"===e.role&&(n.manager=e,n.managerIdx=t)}):n.contacts=[]},angular.element(document).ready(function(){var e=function(e){return 11===e.replace(/\D/g,"").length?"(00) 00000-0000":"(00) 0000-00009"},t={onKeyPress:function(t,o,n,r){n.mask(e.apply({},arguments),r)}};$("#phone").mask(e,t),$("#ownerPhone").mask(e,t),$("#managerPhone").mask(e,t),$("#whatsAppPhone").mask(e,t)})}angular.module("DuoGourmet").controller("PartnerController",e),e.$inject=["$window","Utilities","PartnerService"]}(),function(){"use strict";function e(e,t,o){const n=this;function r(e){if(!e)return swal("Oops...","Atualize a p√°gina e tente novamente!","error"),void grecaptcha.reset();const r={restaurantName:n.restaurantName,personName:n.personName,personRole:n.personRole,personPhone:n.personPhone,personEmail:n.personEmail,restaurantCity:n.restaurantCity,restaurantInstagram:n.restaurantInstagram,restaurantSite:n.restaurantSite,recaptchaToken:e};t.showLoadingMessage("Aguarde...",!1),o.subscribePartner(r).then(function(){t.hideLoadingMessage(),swal("","Sua solicita√ß√£o foi enviada com sucesso. Obrigado!","success"),n.restaurantName="",n.personRole="",n.personName="",n.personPhone="",n.personEmail="",n.restaurantCity="",n.restaurantInstagram="",n.restaurantSite="",grecaptcha.reset()},function(e){t.hideLoadingMessage(),swal("Oops...",e.message,"error"),grecaptcha.reset()})}n.onSubmit=r,n.validate=function(){grecaptcha.execute()},e.onSubmit=r}angular.module("DuoGourmet").controller("PartnersHomeController",e),e.$inject=["$window","Utilities","PartnersHomeService"]}(),function(){"use strict";function e(e,t){const o=this;function n(n){e.finishSubscription(n).then(function(){o.isFinishing=!1,t.hideLoadingMessage(),window.location="/boas-vindas"},function(e){o.isFinishing=!1,t.hideLoadingMessage(),swal("Oops...",e.message,"error")})}function r(e){const t=o.creditCard.expiration.split("/");n({paymentToken:e,cardInfo:{number:o.creditCard.number,name:o.creditCard.name,cvv:o.creditCard.cvv,expMonth:t[0],expYear:t[1]},installments:o.installments})}function a(){$(".ccv").focus(),$(".ccv").notify("Informe o c√≥digo de seguran√ßa corretamente!",{position:"bottom"})}o.isFinishing=!1,o.notValidateCreditCard=!1,o.finishSubscription=function(i){if(i.preventDefault(),o.isFinishing=!0,t.hideLoadingMessage(),o.notValidateCreditCard)t.showLoadingMessage("Aguarde...",!1),n();else{if(!(function(){const e=o.creditCard.number?o.creditCard.number.trim():"";return e.length>=15&&e.length<=16||($(".number").focus(),$(".number").notify("Informe n√∫mero do cart√£o corretamente!",{position:"bottom"}),!1)}()&&function(){const e=o.creditCard.name.split(" ");return!!(e.length>=2&&e[1])||($(".inputname").focus(),$(".inputname").notify("Informe o nome completo do titular!",{position:"bottom"}),!1)}()&&function(){if($(".expire").val().length<5)return $(".expire").focus(),$(".expire").notify("Informe o m√™s e ano corretamente! Ex: 12/30",{position:"bottom"}),!1;return!0}()&&function(){const e=o.creditCard.cvv;return!(!e||3!==e.length&&4!==e.length)||(a(),!1)}()&&function(){if(!o.termsOfUse)return $("#terms-of-use").notify("Aceite os termos de uso para continuar",{position:"bottom"}),!1;return!0}()))return void(o.isFinishing=!1);t.showLoadingMessage("Aguarde...",!1);const n=o.creditCard.expiration.split("/");e.createPaymentToken({number:o.creditCard.number,cvv:o.creditCard.cvv,name:o.creditCard.name,expMonth:n[0],expYear:n[1]}).then(function(e){r(e)}).catch(function(e){o.isFinishing=!1,t.hideLoadingMessage();const n=e&&e.message?e.message:"Ocorreu um erro, tente novamente!";return swal("Oops...",n,"error")})}},o.tokenResponseHandler=function(e){if(e.errors)return o.isFinishing=!1,t.hideLoadingMessage(),e.errors.number?($(".number").focus(),void $(".number").notify("Informe o n√∫mero do cart√£o corretamente!",{position:"bottom"})):e.errors.verification_value?a():e.errors.expiration?($(".expire").focus(),void $(".expire").notify("Informe uma data de validade correta! Ex: 12/"+((new Date).getFullYear()+1),{position:"bottom"})):swal("Oops...","Ocorreu um erro, tente novamente!","error");r(e.id)},o.creditCard={},o.installments=1,angular.element(document).ready(function(){$(".cpf").mask("000.000.000-00",{reverse:!0}),$(".btn-subscription").click(function(e){e.preventDefault(),$.ajax({type:"POST",url:"/selected-plan",dataType:"JSON",timeout:12e4,data:{plan:$(this).data("plan")},success:function(){window.location.reload()},error:function(e){swal("Oops...",e.responseJSON.message,"error")}})}),$(".form-update-cpf").on("submit",function(e){e.preventDefault(),function(){const e=$(".cpf").val();return!!t.isValidCpf(e)||($(".cpf").focus(),$(".cpf").notify("Informe o CPF corretamente!",{position:"bottom"}),!1)}()&&($("body").loading({message:"Aguarde...",stoppable:!1,zIndex:1051,onStart:function(e){e.overlay.slideDown(400)},onStop:function(e){e.overlay.slideUp(400)}}),$.ajax({type:"POST",url:"/update-cpf",dataType:"JSON",timeout:12e4,data:{cpf:$(".cpf").val()},success:function(){t.hideLoadingMessage(),window.location.reload()},error:function(e){t.hideLoadingMessage(),swal("Oops...",e.responseJSON.message,"error")}}))}),$(".insert-promotional-code").on("submit",function(e){e.preventDefault(),$(".promotional-code").val()&&($("body").loading({message:"Aplicando o cupom...",stoppable:!0,zIndex:1051,onStart:function(e){e.overlay.slideDown(400)},onStop:function(e){e.overlay.slideUp(400)}}),$.ajax({type:"POST",url:"/promotional-plan",timeout:12e4,dataType:"JSON",data:{promotionalCode:$(".promotional-code").val()},success:function(){t.hideLoadingMessage(),window.location.reload()},error:function(e){t.hideLoadingMessage(),swal("Oops...",e.responseJSON.message,"error")}}))})})}angular.module("DuoGourmet").controller("PaymentController",e),e.$inject=["PaymentService","Utilities"]}(),function(){"use strict";angular.module("DuoGourmet").controller("RestaurantController",function(){this.form={},angular.element(document).ready(function(){})})}(),function(){"use strict";angular.module("DuoGourmet").controller("RestaurantsController",function(){var e=this;e.form={},e.isSecondSearch=0,e.onChangeSelectCity=function(){$("body").loading({message:"Alterando a cidade...",onStart:function(e){e.overlay.slideDown(400)},onStop:function(e){e.overlay.slideUp(400)}});var e=$("#filterCity").val();window.location.replace("/restaurantes/"+e)},angular.element(document).ready(function(){function t(t){var o=$(".restaurants-list"),n=o.find(".restaurant-card");return function(t,o,r,a,i){e.isSecondSearch++;var s=!1,c=0,u=0;t&&u++;o&&u++;r&&u++;a&&u++;i&&u++;var l=0;n.each(function(){if(t||o||r||a||i){if(s=!1,c=0,t){var e=new window.Fuse([{name:$(this).data("name"),district:$(this).data("district")}],{keys:["name","district"],id:"name",threshold:.3}).search(t);e&&e.length>0&&(s=!0,c++)}(o&&$(this).data("culinary")==o||o&&-1!==$(this).data("othercookings").indexOf(o))&&(s=!0,c++),i&&"yes"==$(this).data(i)&&(s=!0,c++);var n=$(this).data("week-calendar");n&&(r&&a?n[a][r]&&(s=!0,c++,c++):a?(n[a].dinner||n[a].lunch)&&(s=!0,c++):r&&(n[0][r]||n[1][r]||n[2][r]||n[3][r]||n[4][r]||n[5][r]||n[6][r])&&(s=!0,c++)),s&&c>=u?($(this).show(300),l++):$(this).hide(300)}else $(this).show(300),l++;(t||o||r||a||i)&&(window.scrollTo(0,$(window).scrollTop()-10),window.scrollTo(0,$(window).scrollTop()+10))}),0===l?$(".msg-no-restaurants-found").show():$(".msg-no-restaurants-found").hide()}(e.form.name,e.form.culinary,e.form.mealTime,e.form.weekDay,e.form.availabilityOption)}window.sessionStorage.getItem("alert-diff-printed-digital")||$(".alert-diff-printed-digital").show(500),function(){var e=o("dia"),t=o("horario")||o("hor√°rio");"almoco"===t||"almo√ßo"===t?$(".meal-time").val("lunch"):"jantar"===t&&$(".meal-time").val("dinner");if(e)switch(e){case"domingo":$(".week-day").val("0");break;case"segunda":$(".week-day").val("1");break;case"terca":case"ter√ßa":$(".week-day").val("2");break;case"quarta":$(".week-day").val("3");break;case"quinta":$(".week-day").val("4");break;case"sexta":$(".week-day").val("5");break;case"sabado":case"s√°bado":$(".week-day").val("6")}function o(e){var t,o,n=decodeURIComponent(window.location.search.substring(1)),r=n.split("&");for(o=0;o<r.length;o++)if((t=r[o].split("="))[0]===e)return void 0===t[1]||t[1]}}(),$(".lazy").lazy({scrollDirection:"vertical",threshold:0,afterLoad:function(e){$(e).css({"background-image":"linear-gradient(rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.55)), "+$(e).css("background-image")})}}),$(".btn-alert-diff-printed-digital").on("click",function(){try{window.sessionStorage.setItem("alert-diff-printed-digital",1)}catch(e){console.error(e)}}),RegExp.escape||(RegExp.escape=function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}),t(),$(".restaurant-culinary, .week-day, .meal-time, .available-in").on("change",function(){t(!0)}),$(".field-search.restaurant-name").keyup(function(){t()}),$(".form-search").on("submit",function(e){e.preventDefault(),t(!0)})})})}(),function(){"use strict";function e(e,t,o){let n=this;function r(){const e=o.defer();return n.imgBlog?(e.resolve(n.imgBlog),e.promise):(window.fetch(n.storyToShare).then(t=>{t.blob().then(t=>{n.imgBlog=t,e.resolve(n.imgBlog)}).catch(t=>{e.reject(t)})}).catch(t=>{e.reject(t)}),e.promise)}n.isMobile=function(){return e.isMobile()},n.init=function(e){n.hasLoaded=!0;const o=e.stories;if(n.storyToShare=e.storyToShare,n.status=e.status,"processed"!==n.status)return void window.setInterval(()=>{window.location.reload()},3e3);new window.Zuck("stories",{backNative:!0,previousTap:!0,skin:"Snapgram",autoFullScreen:!1,avatars:!1,paginationArrows:!1,list:!1,cubeEffect:!1,localStorage:!1,stories:[o]}),t.find(".story").first().click(),r()},n.storyToShare=null,n.status=null,n.hasLoaded=!1,n.hasShareFeat=navigator&&navigator.share,n.isSharing=!1,!0!==n.isMobile()&&(window.location.href="/"),document.getElementById("share-retro").addEventListener("click",function(){if(!n.storyToShare)return;try{const e=window.location.pathname.replace("/retrospectiva/","");window.dataLayer||(window.dataLayer=[]),window.dataLayer.push({event:"duo_share_retrospective",retrospective_id:e})}catch(e){console.error(e)}try{n.isSharing=!0,r().then(e=>{let t=new window.File([e],"retrospectiva.png",{type:"image/png"});n.isSharing=!1,navigator.share({title:"Retrospectiva",text:"Minha retrospectiva Duo Gourmet 2022!",files:[t]}).then(()=>{})}).catch(e=>{console.error(e)})}catch(e){n.isSharing=!1,console.error(e)}})}angular.module("DuoGourmet").controller("RetrospectiveController",e),e.$inject=["Utilities","$document","$q"]}(),function(){"use strict";function e(e,t,o){const n=this;n.isValidFullName=i,n.isValidPhone=s,n.validate=function(){grecaptcha.execute()},n.onSubmit=a,o.onSubmit=a,n.disabledStyle={backgroundColor:"#e0e0e0"};let r=null;function a(o){if(!o)return swal("Oops...","Atualize a p√°gina e tente novamente!","error"),void grecaptcha.reset();if(!i(!0)||!s(!0)||!function(e){let t=n.password,o=n.fullname.split(" "),r=!0;if(t.length<8)return!0===e&&$("#password").focus(),$("#password").notify("A senha deve ter pelo menos 8 caracteres!",{position:"bottom",autoHideDelay:1500}),!1;if(o.forEach(e=>{if(t&&e.length>3&&t.toLowerCase().includes(e.toLowerCase()))return r=!1,!1}),!r)return $("#password").notify("N√£o utilizar sequ√™ncias num√©ricas, partes do nome ou data de nascimento.",{position:"bottom",autoHideDelay:1500}),!1;if(!c(t))return $("#password").notify("N√£o utilizar sequ√™ncias num√©ricas, partes do nome ou data de nascimento.",{position:"bottom",autoHideDelay:1500}),!1;if(!/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.{8,})/.test(t)||!/[^a-zA-Z0-9]/.test(t))return $("#password").notify("A senha deve cumprir os requisitos.",{position:"bottom",autoHideDelay:1500}),!1;return!0}(!0)||!function(t){let o=n.cpf;return!(!o||!e.isValidCpf(o))||(!0===t&&$("#cpf").focus(),$("#cpf").notify("Informe o CPF corretamente!",{position:"bottom"}),!1)}(!0)||0==grecaptcha.getResponse().length&&($(".g-recaptcha").notify("Confirme que voc√™ n√£o √© um rob√¥ ü§ñ!",{position:"bottom center",autoHideDelay:1500}),1)||(a=!0,n.email!==n.confirmEmail&&(!0===a&&$("#confirmemail").focus(),$("#confirmemail").notify("O email n√£o √© igual ao informado anteriormente!",{position:"bottom",autoHideDelay:1500}),1)))return void grecaptcha.reset();var a;e.showLoadingMessage("Aguarde...",!1);let u={fullName:n.fullname,email:n.email,phone:n.phone,password:n.password,recaptchaToken:o,fbToken:$("#fbToken").val(),cpf:n.cpf,redirectTo:n.redirectTo,fingerprint:r};function l(){$("body").loading("stop"),grecaptcha.reset()}t.signUp(u).then(function(t){e.redirectTo(t.redirectTo),l()}).catch(function(e){swal("Oops...",e.message,"error"),l()})}function i(e){let t=n.fullname;return!((t=t?t.split(" "):"").length<=1||!t[0]||!t[1])||(!0===e&&$("#fullname").focus(),$("#fullname").notify("Informe o nome completo!",{position:"bottom",autoHideDelay:1500}),!1)}function s(e){let t=n.phone;return!(!t||14!==t.length&&15!==t.length)||(!0===e&&$("#phone").focus(),$("#phone").notify("Informe um n√∫mero de telefone v√°lido!",{position:"bottom",autoHideDelay:1500}),!1)}function c(e){for(let t in e)if(+e[+t+1]==+e[t]+1&&+e[+t+2]==+e[t]+2)return!1;for(let t in e)if(String.fromCharCode(e.charCodeAt(t)+1)==e[+t+1]&&String.fromCharCode(e.charCodeAt(t)+2)==e[+t+2])return!1;return!0}n.requirementsContainer={display:"block"},n.showRequirements=!1,n.passwordRequirements=[{textRequirement:"Senha deve ter no m√≠nimo 8 caracteres.",validatePassword:function(){return n.password&&n.password.length>=8}},{textRequirement:"Pelo menos uma letra mai√∫scula.",validatePassword:function(){return n.password&&/^(?=.*[A-Z])/.test(n.password)}},{textRequirement:"Pelo menos uma letra min√∫scula.",validatePassword:function(){return n.password&&/^(?=.*[a-z])/.test(n.password)}},{textRequirement:"Pelo menos um n√∫mero.",validatePassword:function(){return n.password&&/^(?=.*[0-9])/.test(n.password)}},{textRequirement:"Pelo menos um caractere especial. (Ex: ! ? . @ )",validatePassword:function(){return n.password&&/[^a-zA-Z0-9]/.test(n.password)}},{textRequirement:"N√£o possuir sequ√™ncia de letras e n√∫meros.",validatePassword:function(){return n.password&&c(n.password)}},{textRequirement:"N√£o conter informa√ß√µes pessoais.",validatePassword:function(){if(n.password){let e=!0;return n.fullname.split(" ").forEach(t=>{n.password&&t.length>3&&n.password.toLowerCase().includes(t.toLowerCase())&&(e=!1)}),n.password&&e}}}],angular.element(document).ready(function(){window.setTimeout(function(){!function(){try{window.Fingerprint2.get({},function(e){let t=e.map(function(e){return e.value});r=window.Fingerprint2.x64hash128(t.join(""),31)})}catch(e){}}()},500);let e=function(e){return 11===e.replace(/\D/g,"").length?"(00) 00000-0000":"(00) 0000-00009"},t={onKeyPress:function(t,o,n,r){n.mask(e.apply({},arguments),r)}};$("#phone").mask(e,t)})}angular.module("DuoGourmet").controller("SignUpController",e),e.$inject=["Utilities","SignUpService","$window"]}(),function(){"use strict";angular.module("DuoGourmet").controller("SubscriptionController",function(){angular.element(document).ready(function(){$(".scroll-to-plans").click(function(){$("html, body").animate({scrollTop:$(".plans").offset().top},200)}),$(".btn-subscription").click(function(e){e.preventDefault(),$.ajax({type:"POST",url:"/selected-plan",dataType:"JSON",data:{plan:$(this).data("plan")},success:function(){window.location="/pagamento"},error:function(e){swal({title:"Oops...",text:e.responseJSON.message||"Tente novamente!",type:"error"}).then(function(){window.location.reload()})}})})})})}(),function(){"use strict";function e(e,t,o,n,r){var a=this;a.cpf=null,a.isLogging=!1,a.redirectTo=null,a.showBtnFacebook=!1,a.password=null,a.storeRestaurant=c,a.onSubmit=l,a.validate=function(){grecaptcha.execute()},a.showFormIdentifier=!0,a.showFormLogin=!1,a.showCardThanks=!1,a.showFormNewUser=!1,a.showFormPayment=!1,a.isLogging=!1,a.voucherAmount=1,a.login=function(){if(!o.isValidCpf(a.cpf))return void $("#cpf").focus().notify("Informe o CPF corretamente!",{position:"bottom"});o.showLoadingMessage("Aguarde...",!1),a.isLogging=!0,n.login(a.cpf.replace(/[.-]/gi,""),a.password).then(function(e){o.hideLoadingMessage(),a.isLogging=!1,a.showFormLogin=!1,e.logged?(a.showFormPayment=!0,a.isLoggedId="yes"):a.showFormIdentifier=!0},function(e){o.hideLoadingMessage(),swal("Oops...",e.message,"error"),a.isLogging=!1})},e.onSubmit=l,a.direcionador=s,e.direcionador=s,a.isFinishing=!1,a.sendVoucherInfo=function(e){if(e.preventDefault(),a.isFinishing=!0,o.hideLoadingMessage(),!((a.voucherAmount>0||($(".voucherAmount").focus(),$(".voucherAmount").notify("Informe o valor do voucher! Ex: R$100",{position:"bottom"}),0))&&(n=a.cardInfo.ownerName.split(" "),n.length>=2&&n[1]||($(".inputname").focus(),$(".inputname").notify("Informe o nome completo do titular!",{position:"bottom"}),0)))||$(".expire").val().length<5&&($(".expire").focus(),$(".expire").notify("Informe o m√™s e ano corretamente! Ex: 12/30",{position:"bottom"}),1)||(t=$(".ccv").val(),3!==t.length&&4!==t.length&&($(".ccv").focus(),$(".ccv").notify("Informe o c√≥digo de seguran√ßa corretamente!",{position:"bottom"}),1)))return void(a.isFinishing=!1);var t;var n;o.showLoadingMessage("Aguarde...",!1);var i={cardInfo:a.cardInfo,restaurantId:a.restaurantId,voucherAmount:a.voucherAmount,address:a.address};r.sendVoucherInfo(i).then(function(){a.isFinishing=!1,o.hideLoadingMessage(),a.showFormPayment=!1,a.showCardThanks=!0},function(e){a.isFinishing=!1,o.hideLoadingMessage(),a.showFormPayment=!0,a.showCardThanks=!1,swal("Oops...",e.message,"error")})},a.installments=1,a.onChangeSelectCity=function(){$("body").loading({message:"Alterando a cidade...",onStart:function(e){e.overlay.slideDown(400)},onStop:function(e){e.overlay.slideUp(400)}});var e=$("#filterCity").val();a.cityPath=e,window.location.replace("/valorizeagastronomia?cidade="+e+"#restaurants-area")},a.authWithFacebook=function(){window.localStorage.setItem("restaurantId",a.restaurantId),window.localStorage.setItem("restaurantName",a.restaurantName),e.location.href="/auth/facebook/redirect?redirectTo=/valorizeagastronomia"},a.showFormPaymentAfterFacebook=function(){a.showMsgFacebook=!1,a.showFormPayment=!0},a.address={},a.updateAddress=u,a.onClickSignUp=d,e.onClickSignUp=d,a.isValidFullName=m,a.isValidPhone=f;var i=null;function s(e){a.showFormIdentifier?l(e):a.showFormNewUser&&d(e)}function c(e,t){a.restaurantId=e,a.restaurantName=t,a.restaurantReplace=a.restaurantName.replace(" - DELIVERY","").replace(" - PARA RETIRAR",""),a.showFormPayment="yes"==a.isLoggedId,a.showFormLogin=!a.showFormIdentifier&&"no"==a.isLoggedId,a.showFormIdentifier=a.showFormIdentifier&&"no"==a.isLoggedId,a.showCardThanks=!1,$("#modalId").modal({backdrop:"static"})}function u(e,t,o,n,r){a.address.street=e,a.address.placeNumber=t,a.address.district=o,a.address.city=n,a.address.state=r}function l(e){if(!o.isValidCpf(a.cpf))return $("#cpf").focus().notify("Informe o CPF corretamente!",{position:"bottom"}),void grecaptcha.reset();if(!e)return swal("Oops...","Atualize a p√°gina e tente novamente!","error"),void grecaptcha.reset();o.showLoadingMessage("Aguarde...",!1),a.isLogging=!0;var n=a.cpf.replace(/[.-]/gi,"");t.beforeAuth(n,a.redirectTo,e).then(function(e){o.hideLoadingMessage(),a.isLogging=!1,a.showFormIdentifier=!1,a.showBtnFacebook=!0===e.data.showBtnFacebook,e.data.registeredByCpf?a.showFormLogin=!0:a.showFormNewUser=!0;grecaptcha.reset()},function(e){o.hideLoadingMessage(),swal("Oops...",e.message,"error"),a.isLogging=!1,grecaptcha.reset()})}function d(e){if(!e)return swal("Oops...","Atualize a p√°gina e tente novamente!","error"),void grecaptcha.reset();if(m(!0)&&f(!0)&&function(e){if(a.password.length<6)return!0===e&&$("#password").focus(),$("#password").notify("A senha deve ter pelo menos 6 caracteres!",{position:"bottom",autoHideDelay:1500}),!1;return!0}(!0)&&(t=!0,(n=a.cpf)&&o.isValidCpf(n)||(!0===t&&$("#cpf").focus(),$("#cpf").notify("Informe o CPF corretamente!",{position:"bottom"}),0))){var t,n;o.showLoadingMessage("Aguarde...",!1);var s={fullName:a.fullname,email:a.email,phone:a.phone,password:a.password,recaptchaToken:e,fbToken:$("#fbToken").val(),cpf:a.cpf,redirectTo:a.redirectTo,fingerprint:i};r.signUp(s).then(function(){c(),a.showFormNewUser=!1,a.showFormPayment=!0,a.showFormLogin=!1,a.isLoggedId="yes"},function(e){c(),swal("Oops...",e.message,"error")})}function c(){$("body").loading("stop"),grecaptcha.reset()}}function m(e){var t=a.fullname;return!((t=t?t.split(" "):"").length<=1||!t[0]||!t[1])||(!0===e&&$("#fullname").focus(),$("#fullname").notify("Informe o nome completo!",{position:"bottom",autoHideDelay:1500}),!1)}function f(e){var t=a.phone;return!(!t||14!==t.length&&15!==t.length)||(!0===e&&$("#phone").focus(),$("#phone").notify("Informe um n√∫mero de telefone v√°lido!",{position:"bottom",autoHideDelay:1500}),!1)}a.getAddressByCep=function(){a.address.cep&&(a.gettingAddress=!0,a.disableChangeAddress=!1,r.getAddressByCep(a.address.cep).then(function(e){e&&e.uf&&(a.gettingAddress=!1,u(e.logradouro,null,e.bairro,e.localidade,e.uf))},function(){a.gettingAddress=!1}))},a.cardInfo={},a.cardInfo.number="",a.cardInfo.ownerName="",a.cardInfo.expire="",a.cardInfo.cvv="",a.statesList=["AC","AL","AP","AM","BA","CE","DF","ES","GO","MA","MT","MS","MG","PA","PB","PR","PE","PI","RJ","RN","RS","RO","RR","SC","SP","SE","TO"],a.restaurantId=window.localStorage.getItem("restaurantId"),a.restaurantName=window.localStorage.getItem("restaurantName"),a.restaurantId&&a.restaurantName&&(a.showMsgFacebook=!0,c(a.restaurantId,a.restaurantName),window.localStorage.removeItem("restaurantId"),window.localStorage.removeItem("restaurantName")),angular.element(document).ready(function(){window.setTimeout(function(){!function(){try{window.Fingerprint2.get({},function(e){var t=e.map(function(e){return e.value});i=window.Fingerprint2.x64hash128(t.join(""),31)})}catch(e){}}()},500),$("#cvv").mask("00/00"),$("#cardNumber").mask("0000 0000 0000 0000"),$("#cep").mask("00000-000");var e=function(e){return 11===e.replace(/\D/g,"").length?"(00) 00000-0000":"(00) 0000-00009"},t={onKeyPress:function(t,o,n,r){n.mask(e.apply({},arguments),r)}};$("#phone").mask(e,t)})}angular.module("DuoGourmet").controller("VoucherController",e),e.$inject=["$window","AuthService","Utilities","LoginService","VoucherService"]}(),function(){"use strict";function e(e,t,o){var n=this;n.isFinishing=!1,n.finishSubscription=function(r){if(r.preventDefault(),n.isFinishing=!0,t.hideLoadingMessage(),i=n.creditCard.name.split(" "),!((i.length>=2&&i[1]||($(".inputname").focus(),$(".inputname").notify("Informe o nome completo do titular!",{position:"bottom"}),0))&&function(){var e=$(".expire").val();if(e.length<5)return o("Informe o m√™s e ano corretamente! Ex: 12/30"),!1;e=e.split("/");var t=parseInt(moment().format("YY"))-1;return e[0]>12||"00"==e[0]?(o("Informe o m√™s da validade corretamente!"),!1):!(e[1]<=t)||(o("Ops! Cart√£o com validade expirada!"),!1);function o(e){$(".expire").focus(),$(".expire").notify(e,{position:"bottom"})}}()&&(a=$(".ccv").val(),3===a.length||4===a.length||($(".ccv").focus(),$(".ccv").notify("Informe o c√≥digo de seguran√ßa corretamente!",{position:"bottom"}),0))&&(n.termsOfUse||($("#terms-of-use").notify("Aceite os termos de uso para continuar",{position:"bottom"}),0))))return void(n.isFinishing=!1);var a;var i;t.showLoadingMessage("Aguarde...",!1);var s=n.creditCard.expiration.split("/");o.createPaymentToken({number:n.creditCard.number,cvv:n.creditCard.cvv,name:n.creditCard.name,expMonth:s[0],expYear:s[1]}).then(function(o){var r,a={paymentToken:o,installments:n.installments};r=a,e.payGift(r).then(function(e){n.isFinishing=!1,t.hideLoadingMessage(),window.location=window.location.origin+"/presente/obrigado?giftId="+e.giftId},function(e){n.isFinishing=!1,t.hideLoadingMessage(),swal("Oops...",e.message,"error")})}).catch(function(e){n.isFinishing=!1,t.hideLoadingMessage();var o=e&&e.message?e.message:"Ocorreu um erro, tente novamente!";return swal("Oops...",o,"error")})},n.installments=1,n.creditCard={},n.showMessageIncorretExpirationDate=function(){$(".expire").focus(),$(".expire").notify("Informe uma data de validade correta! Ex: 12/"+((new Date).getFullYear()+1),{position:"bottom"})},n.showMessageIncorretCardNumber=function(){$(".number").focus(),$(".number").notify("Informe o n√∫mero do cart√£o corretamente!",{position:"bottom"})}}angular.module("DuoGourmet").controller("GiftPaymentController",e),e.$inject=["GiftService","Utilities","PaymentService"]}(),function(){"use strict";function e(e,t){var o=this;o.giftId=null,o.recipientName="",o.recipientEmail="",o.buyerName="",o.giftCode="",o.sendViaEmail=!1,o.sendViaWhatsApp=!1,o.onClickSendBtn=function(e){o.sendViaEmail="whatsapp"===e,o.sendViaWhatsApp="email"===e},o.sendGift=function(){if(o.sendViaWhatsApp){if(!o.phoneRecipient)return window.alert("Informe o telefone do presenteado!");var n=t.onlyNumbers(o.phoneRecipient);if(n.length<10)return window.alert("Informe o telefone do presenteado corretamente!");var r="üéÅüç¥üç∑\nUm presente especial para quem ama comer bem!\n\nOi, *"+o.recipientName+"*, voc√™ ganhou uma assinatura do Duo Gourmet App!\n\nUse este cupom: *"+o.giftCode+"*\n\nSiga os passos para ativar a assinatura:\n1‚É£ Baixe o Duo Gourmet App\n2‚É£ Fa√ßa seu cadastro\n3‚É£ Use o cupom *"+o.giftCode+"* para assinar\n\n--\n‚ù§";window.open("https://api.whatsapp.com/send?phone=55"+n+"&text="+encodeURI(r),"_blank")}else{if(!o.recipientEmail)return window.alert("Informe o email do presenteado!");o.sendingByEmail=!0,t.showLoadingMessage("Aguarde...",!1),e.sendEmail(o.giftId,o.buyerName,o.recipientEmail,o.recipientName).then(function(){o.sendingByEmail=!1,t.hideLoadingMessage(),swal("Presente enviado com sucesso!","","success"),o.recipientEmail=""}).catch(function(e){o.sendingByEmail=!1,t.hideLoadingMessage(),swal("Oops...",e.message,"error")})}},$(window).ready(function(){var e=function(e){return 11===e.replace(/\D/g,"").length?"(00) 00000-0000":"(00) 0000-00009"},t={onKeyPress:function(t,o,n,r){n.mask(e.apply({},arguments),r)}};$("#phoneRecipient").mask(e,t)})}angular.module("DuoGourmet").controller("GiftShareController",e),e.$inject=["GiftService","Utilities"]}(),function(){"use strict";function e(e){this.subscriptionOnclick=function(t,o){t.preventDefault(),$.ajax({type:"POST",url:"/selected-family-plan",dataType:"JSON",timeout:12e4,data:{planId:o},success:function(){e.redirectTo("/familia/pagamento")},error:function(e){swal("Oops...",e.responseJSON.message,"error")}})}}angular.module("DuoGourmet").controller("FamilyController",e),e.$inject=["Utilities"]}(),function(){"use strict";function e(e,t){var o=this;o.giftId=null,o.buyerEmail="",o.buyerName="",o.sendGift=function(){if(!o.buyerName)return window.alert("Informe um nome para receber seus cupons!");if(!o.buyerEmail)return window.alert("Informe um email para receber seus cupons!");t.showLoadingMessage("Aguarde...",!1),e.sendInvitesByEmail(o.giftId,o.buyerName,o.buyerEmail).then(function(){t.hideLoadingMessage(),swal("Cupons enviados com sucesso!","","success")}).catch(function(e){t.hideLoadingMessage(),swal("Oops...",e.message,"error")})}}angular.module("DuoGourmet").controller("FamilyInviteController",e),e.$inject=["FamilyService","Utilities"]}(),function(){"use strict";function e(e,t,o){var n=this;n.isFinishing=!1,n.finishSubscription=function(r){if(r.preventDefault(),n.isFinishing=!0,t.hideLoadingMessage(),i=n.creditCard.name.split(" "),!((i.length>=2&&i[1]||($(".inputname").focus(),$(".inputname").notify("Informe o nome completo do titular!",{position:"bottom"}),0))&&function(){var e=$(".expire").val();if(e.length<5)return o("Informe o m√™s e ano corretamente! Ex: 12/30"),!1;e=e.split("/");var t=parseInt(moment().format("YY"))-1;return e[0]>12||"00"==e[0]?(o("Informe o m√™s da validade corretamente!"),!1):!(e[1]<=t)||(o("Ops! Cart√£o com validade expirada!"),!1);function o(e){$(".expire").focus(),$(".expire").notify(e,{position:"bottom"})}}()&&(a=$(".ccv").val(),3===a.length||4===a.length||($(".ccv").focus(),$(".ccv").notify("Informe o c√≥digo de seguran√ßa corretamente!",{position:"bottom"}),0))&&(n.termsOfUse||($("#terms-of-use").notify("Aceite os termos de uso para continuar",{position:"bottom"}),0))))return void(n.isFinishing=!1);var a;var i;t.showLoadingMessage("Aguarde...",!1);var s=n.creditCard.expiration.split("/");o.createPaymentToken({number:n.creditCard.number,cvv:n.creditCard.cvv,name:n.creditCard.name,expMonth:s[0],expYear:s[1]}).then(function(o){var r,a={paymentToken:o,installments:n.installments,totalCodes:n.totalCodes};r=a,e.payFamilyPlan(r).then(function(){n.isFinishing=!1,t.hideLoadingMessage(),window.location.replace("/familia/obrigado")},function(e){n.isFinishing=!1,t.hideLoadingMessage(),swal("Oops...",e.message,"error")})}).catch(function(e){n.isFinishing=!1,t.hideLoadingMessage();var o=e&&e.message?e.message:"Ocorreu um erro, tente novamente!";return swal("Oops...",o,"error")})},n.installments=1,n.creditCard={},n.showMessageIncorretExpirationDate=function(){$(".expire").focus(),$(".expire").notify("Informe uma data de validade correta! Ex: 12/"+((new Date).getFullYear()+1),{position:"bottom"})},n.showMessageIncorretCardNumber=function(){$(".number").focus(),$(".number").notify("Informe o n√∫mero do cart√£o corretamente!",{position:"bottom"})}}angular.module("DuoGourmet").controller("FamilyPaymentController",e),e.$inject=["FamilyService","Utilities","PaymentService"]}(),$(window).ready(function(){window.Iugu?window.Iugu.setAccountID("F19D09D7B8F9BB4D5C2E77507C0CBC33"):console.log("Iugu is not available"),$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$(document).ready(function(){$("#text_interaction").on("mouseenter","span",function(){$("#iphone img").removeClass("visible");var e=$(this).index();$("#iphone img").eq(e).addClass("visible"),$("#text_interaction span").removeClass("selected"),$(this).addClass("selected")})}),$('[data-toggle="tooltip"]').tooltip(),$("#sidebar").mCustomScrollbar({theme:"minimal"}),$("#dismiss, .overlay, #sidebar li a").on("click",function(){$("#sidebar").removeClass("active"),$(".overlay").fadeOut(),$("body").removeClass("hidden-overflow-y")}),$("#sidebarCollapse").on("click",function(){$("#sidebar").addClass("active"),$(".overlay").fadeIn(),$(".collapse.in").toggleClass("in"),$("a[aria-expanded=true]").attr("aria-expanded","false"),$("body").addClass("hidden-overflow-y")})});